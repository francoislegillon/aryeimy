<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WebGL Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #222;
            color: white;
        }
        .status {
            padding: 20px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 16px;
        }
        .success { background: #2d5a2d; }
        .error { background: #5a2d2d; }
        .info { background: #2d2d5a; }
        canvas {
            border: 2px solid #555;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üîç WebGL & Browser Capability Test</h1>
    
    <div id="browserInfo" class="status info">
        <strong>Browser Info:</strong><br>
        User Agent: <span id="userAgent"></span><br>
        WebGL Support: <span id="webglSupport"></span><br>
        WebGL2 Support: <span id="webgl2Support"></span>
    </div>
    
    <div id="testResults" class="status">
        Running tests...
    </div>
    
    <canvas id="testCanvas" width="400" height="300"></canvas>
    
    <div class="status info">
        <strong>Recommendations:</strong><br>
        ‚Ä¢ Try opening in <strong>system browser</strong> (Chrome/Safari) instead of VS Code<br>
        ‚Ä¢ Check if hardware acceleration is enabled<br>
        ‚Ä¢ Update your browser if WebGL is not supported
    </div>

    <script>
        // Get browser info
        document.getElementById('userAgent').textContent = navigator.userAgent;
        
        // Test WebGL support
        function testWebGL() {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            return !!gl;
        }
        
        function testWebGL2() {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl2');
            return !!gl;
        }
        
        const hasWebGL = testWebGL();
        const hasWebGL2 = testWebGL2();
        
        document.getElementById('webglSupport').textContent = hasWebGL ? '‚úÖ Yes' : '‚ùå No';
        document.getElementById('webgl2Support').textContent = hasWebGL2 ? '‚úÖ Yes' : '‚ùå No';
        
        // Test basic WebGL rendering
        function testWebGLRendering() {
            const canvas = document.getElementById('testCanvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            
            if (!gl) {
                return 'WebGL not available - cannot render 3D content';
            }
            
            try {
                // Clear to green if WebGL works
                gl.clearColor(0.0, 1.0, 0.0, 1.0);
                gl.clear(gl.COLOR_BUFFER_BIT);
                return 'WebGL rendering successful - canvas should be green';
            } catch (e) {
                return 'WebGL error: ' + e.message;
            }
        }
        
        // Run tests
        setTimeout(() => {
            const result = testWebGLRendering();
            const resultsDiv = document.getElementById('testResults');
            
            if (hasWebGL && result.includes('successful')) {
                resultsDiv.className = 'status success';
                resultsDiv.innerHTML = `
                    <strong>‚úÖ WebGL Working!</strong><br>
                    ${result}<br><br>
                    <strong>Next step:</strong> Try A-Frame in a system browser (Chrome/Safari)
                `;
            } else {
                resultsDiv.className = 'status error';
                resultsDiv.innerHTML = `
                    <strong>‚ùå WebGL Problem!</strong><br>
                    ${result}<br><br>
                    <strong>Solution:</strong> Open in Chrome/Safari with hardware acceleration enabled
                `;
            }
        }, 1000);
        
        // Log detailed info
        console.log('üîç Browser capabilities:');
        console.log('  WebGL:', hasWebGL);
        console.log('  WebGL2:', hasWebGL2);
        console.log('  User Agent:', navigator.userAgent);
        
        // Test if we're in VS Code
        if (navigator.userAgent.includes('VS Code')) {
            console.log('‚ö†Ô∏è Running in VS Code - 3D rendering may be limited');
        }
    </script>
</body>
</html>